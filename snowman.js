// Generated by CoffeeScript 1.4.0
var Snowman;

Snowman = (function() {

  function Snowman() {}

  Snowman.prototype.load = function() {
    var _this = this;
    _.bind(this);
    Crafty.init(400, 336);
    Crafty.scene("game", function() {
      _this.garden = _this.createGarden();
      _this.ball = _this.createBall();
      Crafty.e("2D, Canvas, Text").attr({
        w: 100,
        h: 20,
        x: 10,
        y: 0
      }).text("Alex der Schneemann").textColor('#222222');
      Crafty.bind('mousedown', _this.startBall);
      return _this;
    });
    Crafty.scene("game");
    return this;
  };

  Snowman.prototype.startBall = function(event) {
    return this.drawBall = true;
  };

  Snowman.prototype.moveBall = function(event) {
    if (this.drawBall) {
      console.log(this);
      Crafty.e('Particles').attr({
        x: event.realX,
        y: event.realY,
        angle: 200
      }).particles({
        x: event.realX,
        y: event.realY,
        duration: 1,
        gravity: {
          x: 0,
          y: 0.01
        },
        startColour: [255, 255, 255, 1],
        endColour: [250, 250, 255, 1],
        startColourRandom: [0, 0, 5, 0],
        endColourRandom: [0, 0, 20, 0],
        angle: 180
      });
      window.snowman.ball.x = event.realX - window.snowman.ball.w / 2;
      window.snowman.ball.y = event.realY - window.snowman.ball.h / 2;
      window.snowman.ball.h += 1;
      window.snowman.ball.w += 1;
      return window.snowman.ball.draw();
    }
  };

  Snowman.prototype.endBall = function(event) {
    window.snowman.ball = window.snowman.createBall();
    return this.drawBall = false;
  };

  Snowman.prototype.createBall = function() {
    return Crafty.e('2D, Canvas, Circle, Color').color('#FFFFFF');
  };

  Snowman.prototype.createGarden = function() {
    return Crafty.e('2D, Canvas, Input, Mouse, Color').attr({
      w: Crafty.viewport.width,
      h: Crafty.viewport.height
    }).color('#AAAAAA').areaMap([0, 0], [Crafty.viewport.width, 0], [Crafty.viewport.width, Crafty.viewport.height], [0, Crafty.viewport.height]).bind('MouseDown', this.startBall).bind('MouseUp', this.endBall).bind('MouseMove', this.moveBall).bind('TouchDown', this.startBall);
  };

  return Snowman;

})();
